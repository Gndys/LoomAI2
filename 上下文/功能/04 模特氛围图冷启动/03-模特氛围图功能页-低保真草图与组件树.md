# 模特氛围图功能页低保真草图与组件树（V1）

> 用途：用于产品评审、UI 评审、前端开工前对齐。  
> 目标：先保证“3步出图 + 批量导出 + 可继续到海报”。

## 1. 路由与页面定位

- 建议路由：`/[lang]/model-atmosphere`
- 页面类型：独立功能页（与 `product-white-background` 同级）
- 关系定位：`白底图（上架） -> 模特氛围图（转化） -> 海报（宣发）`

---

## 2. 低保真线框（桌面端）

```text
┌──────────────────────────────────────────────────────────────────────────┐
│ [Badge: 模特氛围图]                                                     │
│ H1: 3分钟生成可投放模特氛围图                                             │
│ Desc: 白底图一键升级场景模特图                                            │
├──────────────────────────────────────────────────────────────────────────┤
│ 左栏(2/3)                                              右栏(1/3)         │
│                                                                          │
│ ┌────────────────────────────┐      ┌─────────────────────────────────┐ │
│ │ A. 上传区                  │      │ D. 模特设置 + 输出设置          │ │
│ │ [拖拽/点击上传]            │      │ 性别 [女/男/中性]               │ │
│ │ 文件列表(名称/分辨率/状态) │      │ 年龄 [18-24/25-30/30+]          │ │
│ └────────────────────────────┘      │ 体型 [纤细/标准/偏丰满]         │ │
│                                      │ 姿态 [站姿/走动/半身]           │ │
│ ┌────────────────────────────┐      │ 表情 [自然/冷感/不露脸]         │ │
│ │ B. 模板区（4卡片）          │      │ 比例 [1:1/4:5/9:16]             │ │
│ │ 通勤 / 门店 / 街拍 / 影棚    │      │ 背景强度 [低/中/高]             │ │
│ └────────────────────────────┘      │ [开始生成] [恢复推荐]           │ │
│                                      │ [批量导出ZIP]                   │ │
│ ┌────────────────────────────┐      └─────────────────────────────────┘ │
│ │ C. 结果区                  │                                         │
│ │ Toolbar: 全部/通过/复检/失败 │                                        │
│ │ Grid: 缩略图 + 状态 + 操作   │                                        │
│ │ 操作: 对比 / 再生成 / 下载    │                                        │
│ └────────────────────────────┘                                         │
│                                                                          │
│ ┌──────────────────────────────────────────────────────────────────────┐ │
│ │ E. 质量检查（可折叠）：服装完整度 / 人像自然度 / 背景干净度 / 细节可见 │ │
│ └──────────────────────────────────────────────────────────────────────┘ │
│                                                                          │
│ ┌──────────────────────────────────────────────────────────────────────┐ │
│ │ F. 下一步：去生成海报                                                │ │
│ └──────────────────────────────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────────────────────────────┘
```

### 2.1 AI 对话框（桌面端补充）

> 目的：对齐“对话区留白、标题无意义、画布/附件不显”的问题。

```text
┌───────────────────────────────────────────────────────────────┐
│ Header: 模式名 + 状态（替代“AI 对话”标题）                      │
│ [Json 拆解]  已启用 · 支持图片/画布         [切换/新建]         │
├───────────────────────────────────────────────────────────────┤
│ MessageList（左右统一边距，气泡最大宽度 80~88%）               │
│                                                               │
│ AI: 头像占位 + 气泡（浅灰）                                    │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 你好！我是 Json 拆解…                                     │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                               │
│ 用户: 右侧状态位 + 气泡（品牌色，降饱和）                       │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ [附件卡] AI-nano-banana-2-lite                             │ │
│  │ 1020x1500 · JPEG · 300KB   [预览] [替换]                    │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                               │
│ AI: 结果卡（可折叠）                                           │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ JSON 摘要：图片基本信息 / 内容描述 / 质量点评…             │ │
│  │ [展开]                                                   │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                          [跳到最新]           │
├───────────────────────────────────────────────────────────────┤
│ Composer: 输入框 + 附件 + 发送                                 │
│ 提示：Enter 发送，Shift+Enter 换行                              │
└───────────────────────────────────────────────────────────────┘
```

样式要点：
- 左右留白对称：容器左右边距统一（如 16），气泡最小宽度 36%，最大宽度 80~88%
- AI 气泡左侧头像占位；用户气泡右侧保留状态位，避免“空白无意义”
- 标题改为“模式名 + 状态”，可承载切换/新建入口
- 画布/附件用卡片展示（缩略图 + 尺寸/格式/大小 + 预览/替换）
- JSON 内容默认折叠为摘要，降低噪音

---

## 3. 低保真线框（移动端）

```text
┌─────────────────────────────┐
│ Hero 标题 + CTA              │
├─────────────────────────────┤
│ 上传区                        │
├─────────────────────────────┤
│ 模板区（横向滑动）            │
├─────────────────────────────┤
│ 模特设置（折叠）              │
├─────────────────────────────┤
│ 结果区（列表）                │
├─────────────────────────────┤
│ 质检区（折叠）                │
├─────────────────────────────┤
│ 导出区                        │
├─────────────────────────────┤
│ 去生成海报                    │
└─────────────────────────────┘
```

移动端原则：
- 先看到 `上传 + 模板 + 生成` 主路径
- 次级设置折叠，降低首屏负担
- 导出按钮固定在底部工具条（可选）

---

## 4. 组件树（建议）

```text
ModelAtmospherePage
└─ FeaturePageShell
   ├─ HeroSection
   ├─ MainGrid
   │  ├─ UploadPanel
   │  │  ├─ UploadDropzone
   │  │  └─ UploadList
   │  ├─ TemplatePanel
   │  │  └─ TemplateCard[]
   │  ├─ ResultPanel
   │  │  ├─ ResultToolbar
   │  │  ├─ ResultGrid
   │  │  └─ CompareDialog
   │  └─ SettingsPanel
   │     ├─ ModelSettings
   │     ├─ OutputSettings
   │     ├─ GenerateAction
   │     └─ ExportAction
   ├─ ChatDock（可选：右侧抽屉/浮层）
   │  ├─ ChatHeader（ModeTitle + Status + Actions）
   │  ├─ MessageList
   │  │  ├─ MessageGroup
   │  │  │  ├─ Avatar
   │  │  │  ├─ MessageBubble
   │  │  │  └─ AttachmentCard / CanvasPreview
   │  │  └─ ScrollToLatest
   │  └─ ChatComposer（Input + Attach + Send）
   ├─ QualityPanel
   └─ NextStepPanel
```

可复用来源：
- 布局容器：`components/feature-page-shell.tsx`
- 上传样式：`product-white-background/page.tsx` 上传逻辑
- 按钮/下拉/开关：`components/ui/*`

---

## 5. 状态模型（前端）

核心状态建议：
- `items`: 上传队列（id、name、previewUrl、status、error）
- `selectedTemplate`: 当前模板
- `modelConfig`: 性别/年龄/体型/姿态/表情
- `outputConfig`: 比例/背景强度/命名规则/格式
- `isGenerating`: 全局生成状态
- `results`: 结果列表（含 quality、versions）
- `activeFilter`: 全部/通过/复检/失败

状态流：
1. 上传后写入 `items`
2. 点击生成后把 `ready -> processing`
3. 接口返回后写入 `results`，同步 `done/failed`
4. 导出时只消费 `results` 中可导出项

---

## 6. 关键交互（必须先跑通）

- 交互1：模板即策略
  - 选中模板后，自动填充推荐参数
- 交互2：一键重试
  - 失败项可单独重试，不影响已成功项
- 交互3：同参数复用
  - 单图结果可“同模板再来一版”
- 交互4：导出可控
  - 支持 `仅导出通过` 与 `批量 ZIP`

---

## 7. V1 验收口径（页面级）

- 新用户 30 秒内能理解这个页能做什么
- 新用户 3 步可完成首张生成
- 批量任务可视化状态明确
- 导出命名可读、可追踪
- 从本页可继续去“海报页”

---
description: i18n guideline
globs: 
alwaysApply: false
---
# Internationalization (i18n) Guidelines

## File Structure

```
libs/i18n/
├── locales/
│   ├── types.ts       # Type definitions for all translations
│   ├── en.ts          # English translations
│   ├── zh-CN.ts       # Chinese translations
│   └── index.ts       # Exports all translations
└── index.ts           # Main i18n configuration
```

## Adding New Translations

1. **Define Types First**
   - Always start by adding new translation keys to `types.ts`
   - Group related translations under appropriate namespaces (e.g., `auth`, `common`)
   - Use descriptive key names that reflect their usage

```typescript
// Example structure in types.ts
export type Locale = {
  namespace: {
    feature: {
      title: string
      description: string
      // Add form-related translations
      form: {
        labels: { ... }
        placeholders: { ... }
        errors: { ... }
      }
      // Add action-related translations
      actions: {
        submit: string
        cancel: string
      }
    }
  }
}
```

2. **Common Patterns**
   - Form fields: include `label`, `placeholder`, and `error` messages
   - Buttons: include normal and loading states (e.g., `submit` and `submitting`)
   - Error messages: group under `errors` object
   - Terms & Policies: reuse common translations (`common.and`, `auth.termsNotice`, etc.)

3. **Component Implementation**
   ```typescript
   'use client';
   
   import { useTranslation } from "@/hooks/use-translation"
   
   export function YourComponent() {
     const { t, locale } = useTranslation()
     
     return (
       <>
         <h1>{t.namespace.feature.title}</h1>
         <form>
           <Label>{t.namespace.feature.form.labels.fieldName}</Label>
           <Input 
             placeholder={t.namespace.feature.form.placeholders.fieldName}
             // ... 
           />
           {error && <span>{t.namespace.feature.form.errors.fieldName}</span>}
         </form>
       </>
     )
   }
   ```

## Best Practices

1. **Type Organization**
   - Group related translations under meaningful namespaces
   - Keep nesting to a maximum of 4 levels for maintainability
   - Use consistent naming patterns across different features

2. **Reusable Translations**
   - Put common/shared strings under `common` namespace
   - Use action-related strings under `actions` namespace
   - Keep form-related patterns consistent across features

3. **Error Handling**
   - Always include both required and invalid error states
   - Use `common.unexpectedError` for unknown errors
   - Follow the pattern: `namespace.feature.errors.errorType`

4. **Loading States**
   - Include loading state text for async actions
   - Follow the pattern: `verb` and `verbIng` (e.g., `submit` and `submitting`)


